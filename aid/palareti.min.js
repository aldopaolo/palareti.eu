"use strict";function urlDetailFormatter(value){let ret;return ret=value?value.indexOf("//")<0?`<a href="//${value}" target="_blank">${value}</a>`:`<a href="${value}" target="_blank">${value}</a>`:"",ret}function getJson(fileUrl){let xhr=new XMLHttpRequest,response="[]",ret;xhr.open("GET",fileUrl,!1),xhr.setRequestHeader("Content-type","application/json; charset=utf-8");try{xhr.send(),200===xhr.status?response=xhr.response:alert(`Error in file ${fileUrl}: Status ${xhr.status}, "${xhr.statusText}"`)}catch(err){alert(`Request failed -- file ${fileUrl}`)}try{ret=JSON.parse(response)}catch(err){alert(`Errori nel file json -- file ${fileUrl}`),ret=[]}return ret}!function(){const scriptElements=[...document.getElementsByTagName("script")],scriptWithPathName=scriptElements.find(e=>"/aid/init.js"===new URL(e.src).pathname),classList=scriptWithPathName?[...scriptWithPathName.classList]:[],classBulmaResources=classList.indexOf("alpa-Bulma-resources")>=0,treeinfoResources=!!location.href.match(/^http.*\/\.treeinfo\.html$/),classTableResources=classList.indexOf("alpa-table-resources")>=0,classPathResources=classList.indexOf("alpa-path-resources")>=0,classPathStyle=classList.indexOf("alpa-path-style")>=0,classPathScript=classList.indexOf("alpa-path-script")>=0,classPageResources=classList.indexOf("alpa-page-resources")>=0,classPageStyle=classList.indexOf("alpa-page-style")>=0,classPageScript=classList.indexOf("alpa-page-script")>=0,pathnameSlashLastPosition=location.pathname.lastIndexOf("/"),pageHttpHeaders=function(){let req=new XMLHttpRequest;req.open("GET",document.location,!1),req.send(null);let data=new Object,headers,aHeaders=req.getAllResponseHeaders().toLowerCase().split("\n");for(let header of aHeaders){let pos=header.indexOf(":"),key=header.substring(0,pos),value=header.substring(pos+1).trim(" \n\r");data[key]=value}return data.Referer=document.referer,data.UserAgent=navigator.userAgent,data}();if((classBulmaResources||treeinfoResources||classTableResources)&&addStyle(addMin("https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma","css",!0)),classTableResources&&(addStyle(addMin("https://unpkg.com/tabulator-tables@5.3.3/dist/css/tabulator","css",!0)),addScript(!0,addMin("https://unpkg.com/tabulator-tables@5.3.3/dist/js/tabulator","js",!0))),window.addEventListener("load",event=>{let title=document.getElementsByTagName("title")[0].text;document.body.insertAdjacentHTML("afterbegin",`<section class="hero is-small is-primary"><div class="hero-body"><p class="title">${title}</p></div></section>`);let copyright=new Date(pageHttpHeaders.date).toISOString().substring(0,7);document.body.insertAdjacentHTML("beforeend",`<footer class="footer"><div class="content"><p>\nSito, codice sorgente e contenuti informatici di <a href="mailto:aldopaolo@palareti.eu"><strong>Aldopaolo Palareti</strong></a>.\n<br>Contenuti storici di <a href="mailto:francesco.casadei@unibo.it"><strong>Francesco Casadei</strong></a>.\n<br>Â© ${copyright} per il contenuto, con licenza <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.it" target="_blank">CC BY NC SA 4.0</a> .\n<br>In questo sito non vengono usati cookie\n</p></div></footer>`)}),treeinfoResources&&window.addEventListener("load",event=>{const path=location.pathname.replace(/\/[^\/]*$/,""),treeinfo_json=getJson(`${path}/.treeinfo.json`);let treeinfo_breadcrumb=document.getElementById("breadcrumb");if(treeinfo_breadcrumb){treeinfo_json.Titolo&&treeinfo_breadcrumb.insertAdjacentHTML("beforebegin",`<h2 class="subtitle">${treeinfo_json.Titolo}<h2>`);let breadcrumbList="<ul>";for(let Breadcrumb of treeinfo_json.Breadcrumb)breadcrumbList+=`<li><a href="${Breadcrumb.Href}">${Breadcrumb.Titolo}</a></li>`;breadcrumbList+=`<li class="is-active"><a href="#" aria-current="page">${treeinfo_json.Titolo}</a></li></ul>`,treeinfo_breadcrumb.innerHTML=breadcrumbList}let elencaLink=(faKey,lista)=>{let ret="";for(let File of lista)ret+=`<p class="icon-text"><span class="icon"><i class="fas fa-thin ${faKey}"></i></span> <a href="${File.PathName}">${File.Titolo}</p>`;return ret},treeinfo_html=document.getElementById("treeinfo-html");treeinfo_html&&treeinfo_json.FileHTML.length&&(treeinfo_html.insertAdjacentHTML("beforebegin","<h3 class='title'>Documenti HTML disponibili</h3>"),treeinfo_html.innerHTML=elencaLink("fa-file-code",treeinfo_json.FileHTML));let treeinfo_pdf=document.getElementById("treeinfo-pdf");treeinfo_pdf&&treeinfo_json.FilePDF.length&&(treeinfo_pdf.insertAdjacentHTML("beforebegin","<h3 class='title'>Documenti PDF disponibili</h3>"),treeinfo_pdf.innerHTML=elencaLink("fa-file-pdf",treeinfo_json.FilePDF));let treeinfo_ppt=document.getElementById("treeinfo-ppt");treeinfo_ppt&&treeinfo_json.FilePPT.length&&(treeinfo_ppt.insertAdjacentHTML("beforebegin","<h3 class='title'>Documenti PPT disponibili</h3>"),treeinfo_ppt.innerHTML=`${treeinfo_json.FilePPT.length} documenti`,treeinfo_ppt.innerHTML=elencaLink("fa-presentation-screen",treeinfo_json.FilePPT));let treeinfo_dir=document.getElementById("treeinfo-dir");treeinfo_dir&&treeinfo_json.Descendants.length&&(treeinfo_dir.insertAdjacentHTML("beforebegin","<h3 class='title'>Cartelle contenute</h3>"),treeinfo_dir.innerHTML=`${treeinfo_json.Descendants.length} cartelle`)}),classPathResources||classPathStyle||classPathScript){let dirPath;if(0===pathnameSlashLastPosition)dirPath="root";else{dirPath=location.pathname.substring(0,pathnameSlashLastPosition-1);const dirSlashPosition=dirPath.lastIndexOf("/");dirPath=dirPath.substring(dirSlashPosition+1)}(classPathResources||classPathStyle)&&addStyle(`${dirPath}.css`),(classPathResources||classPathScript)&&addScript(!0,`${dirPath}.js`)}if(classPageResources||classPageStyle||classPageScript){let resource=location.pathname.substring(pathnameSlashLastPosition+1);const resourceQueryPosition=resource.indexOf("?");resourceQueryPosition>0&&(resource=resource.substring(0,resourceQueryPosition));const resourceFragmentPosition=resource.indexOf("?");resourceFragmentPosition>0&&(resource=resource.substring(0,resourceFragmentPosition));const resourceExtensionPosition=resource.lastIndexOf(".");resourceExtensionPosition>0&&(resource=resource.substring(0,resourceExtensionPosition)),(classPageResources||classPageStyle)&&addStyle(`${resource}.css`),(classPageResources||classPageScript)&&addScript(!0,`${resource}.js`)}}();